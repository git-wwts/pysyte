#! /usr/bin/env python3
"""Show some lines from files

Usage: %(prog)s [options] [files]

"""
from pysyte.cli import streams
from pysyte.cli.main import run
from pysyte.cli.functions import parser
from pysyte.types import lines


def add_args(parser_):
    """Parse out command line arguments"""
    p = parser(parser_)
    p.strings('files', help='files to edit')
    return p


def main(args):
    """Run the script"""
    at = args.at
    first = args.first or 1
    last = args.last or -1
    for stream in streams.args(args, 'files'):
        start, lines_in = lines.first_and_rest(
            stream.read(),
            at,
            first,
            last
        )
        lines_out = args.sed(lines_in, start)
        print(lines.as_text(lines_out))
    return True


run(main, add_args)
