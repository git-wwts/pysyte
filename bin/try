#! /usr/bin/env python3
"""Run doctests in *.py and associated test files"""

import sys
import importlib

from pysyte.testing import trying
from pysyte.testing import files_for_test

# Module name prevents a normal import
# try_ = importlib.import_module('try', 'pysyte.testing')


def main():
    """Run the program"""

    try:
        return trying.test()
    except files_for_test.UserMessage as e:
        print(e, file=sys.stderr)
    except KeyboardInterrupt as e:
        print('^c ^C ^c ^C ^c ^C ^c ^C ^c ^C ^c ', file=sys.stderr)
        try:
            print('Bye now', file=sys.stderr)
            if str(e):
                print(e, file=sys.stderr)
        except SyntaxError:
            sys.stdout.write('%s had a SyntaxError:\n' % sys.executable)
            traceback.print_exc()


if __name__ == '__main__':
    sys.exit(main())
